/*
 * Copyright (c) 2010, 2012, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package com.oracle.max.vm.ext.vma.store.txt;

import java.util.*;

import com.sun.max.program.*;

/**
 * Defines a compact textual format that uses short forms for class, field and thread names.
 * In addition, a repeated id (but not when used as a value) is, by default, passed as
 * {@link CVMATextStore.Key#REPEAT_ID} and the
 * underlying format knows how to interpret that. This can be suppressed by setting the
 * system property {@value NO_REPEATS_PROPERTY). Repeated ids are only generated
 * for records created by the same originating thread.
 *
 * <li>{@link #classDefinitionTracking}: G shortClass class clid
 * <li>{@link #classDefinitionFieldTracking}: F shortField field
 * <li>{@link #threadDefinitionTracking}: T shortThread thread
 * <li>{@link #methodDefinitionTracking}: M shortMethod method
 * </ul>
 *
 * By default instances of the short forms are represented simply by their
 * integer value. This minimizes log size but makes the log very hard to read by a human.
 * A single character prefix (C, F, T) can be generated by setting the
 * system property {@link PREFIX_PROPERTY}.
 *
 * We do not know the multi-threaded behavior of callers. Many threads may be synchronously
 * logging or one or more threads may be asynchronously logging records generated by
 * other threads.
 *
 * The short form maps are (necessarily) global to all threads and must be thread-safe.
 * The repeated id handling uses a thread-local as it operates across multiple
 * methods and is thread-specific.
 */

public abstract class CSFVMATextStore extends CVMATextStore {

    protected final CVMATextStore del;

    private static Map<String, LastId> repeatedIds;
    private static int classInt;
    private static int fieldInt;
    private static int threadInt;
    private static int methodInt;
    private static final String NO_REPEATS_PROPERTY = "max.vma.norepeatids";
    private static final String PREFIX_PROPERTY = "max.vma.shortprefix";
    private static boolean doRepeats;
    private static boolean doPrefix;

    /**
     * Denotes a class name and classloader id.
     * Used as the value in the short forms map for a class.
     */
    public static class ClassNameId {
        public String name;
        public long clId;
        public ClassNameId(String name, long clId) {
            this.name = name;
            this.clId = clId;
        }

        @Override
        public int hashCode() {
            return (int) (name.hashCode() ^ clId);
        }

        @Override
        public boolean equals(Object other) {
            ClassNameId otherClassName = (ClassNameId) other;
            return name.equals(otherClassName.name) && clId == otherClassName.clId;
        }
    }

    /**
     * Denotes a qualified name. Used as the value in the short form maps for fields and methods.
     */
    public static class QualName {
        public ClassNameId className;
        public String name;
        public QualName(String className, long clId, String name) {
            this.className = new ClassNameId(className, clId);
            this.name = name;
        }

        public QualName(ClassNameId className, String name) {
            this.className = className;
            this.name = name;
        }

        @Override
        public int hashCode() {
            return className.hashCode() ^ name.hashCode();
        }

        @Override
        public boolean equals(Object other) {
            QualName otherQualName = (QualName) other;
            return className.equals(otherQualName.className) && name.equals(otherQualName.name);
        }
    }

    /**
     * Per-thread value that is used to check the map for existence.
     */
    private class ClassNameIdTL extends ThreadLocal<ClassNameId> {
        @Override
        public ClassNameId initialValue() {
            return new ClassNameId(null, 0);
        }
    }

    private final ClassNameIdTL classNameIdTL = new ClassNameIdTL();

    /**
     * Per-thread value that is used to check the map for existence.
     */
    private class QualNameTL extends ThreadLocal<QualName> {
        @Override
        public QualName initialValue() {
            return new QualName(classNameIdTL.get(), null);
        }
    }

    private final QualNameTL qualNameTL = new QualNameTL();

    public static enum ShortForm {
        C("C"),
        F("F"),
        T("T"),
        M("M");

        public final String code;

        private Map<Object, String> shortForms = new HashMap<Object, String>();
        private int nextId;

        String createShortForm(CSFVMATextStore handler, Object key) {
            synchronized (shortForms) {
                String shortForm = shortForms.get(key);
                String classShortForm = null;
                if (shortForm == null) {
                    Object newKey = key;
                    shortForm = doPrefix ? (code + nextId) : Integer.toString(nextId);
                    nextId++;
                    switch (this) {
                        case T:
                            break;
                        case C:
                            ClassNameId tlKey = (ClassNameId) key;
                            newKey = new ClassNameId(tlKey.name, tlKey.clId);
                            break;
                        case F:
                        case M:
                            QualName tlQualName = (QualName) key;
                            newKey = new QualName(new ClassNameId(tlQualName.className.name, tlQualName.className.clId), tlQualName.name);
                            classShortForm = ShortForm.C.createShortForm(handler, tlQualName.className);
                            break;
                    }
                    shortForms.put(newKey, shortForm);
                    handler.defineShortForm(this, key, shortForm, classShortForm);
                }
                return shortForm;
            }

        }

        ShortForm(String code) {
            this.code = code;
        }
    }

    static class LastId {
        long id = REPEAT_ID_VALUE;
    }

    protected CSFVMATextStore(CVMATextStore del) {
        super();
        this.del = del;
    }

    /**
     * Check if this {@code objId} is the same as the previous one.
     * Note that all traces that start with an {@code objId} must call this method!
     * @param id
     * @param threadName
     * @return {@link TextVMAdviceHandlerLog#REPEAT_ID_VALUE} for a match, {@code id} otherwise
     */
    private static long checkRepeatId(long id, String threadName) {
        LastId lastId;
        if (doRepeats) {
            lastId = getLastId(threadName);
            if (lastId.id == id) {
                return REPEAT_ID_VALUE;
            } else {
                lastId.id = id;
            }
        }
        return id;
    }

    private static LastId getLastId(String threadName) {
        synchronized (repeatedIds) {
            LastId lastId = repeatedIds.get(threadName);
            if (lastId == null) {
                lastId = new LastId();
                repeatedIds.put(threadName, lastId);
            }
            return lastId;
        }
    }

    @Override
    public boolean initializeStore(boolean timeOrdered, boolean perThread) {
        repeatedIds = new HashMap<String, LastId>();
        doRepeats = System.getProperty(NO_REPEATS_PROPERTY) == null;
        doPrefix = System.getProperty(PREFIX_PROPERTY) != null;
        return del.initializeStore(timeOrdered, perThread);
    }

    @Override
    public void finalizeStore() {
        del.finalizeStore();
    }

    @Override
    public void removal(long id) {
        del.removal(id);
    }

    @Override
    public void unseenObject(long time, String threadName, long objId, String className, long clId) {
        del.unseenObject(time, getThreadShortForm(threadName), checkRepeatId(objId, threadName), getClassShortForm(className, clId), clId);
    }

    @Override
    public void threadSwitch(long time, String threadName) {
        del.threadSwitch(time, getThreadShortForm(threadName));
    }


    protected String getClassShortForm(String className, long clId) {
        ClassNameId classNameId = classNameIdTL.get();
        classNameId.name = className;
        classNameId.clId = clId;
        return ShortForm.C.createShortForm(this, classNameId);
    }

    protected String getFieldShortForm(String className, long clId, String fieldName) {
        QualName qualNameId = qualNameTL.get();
        qualNameId.className.name = className;
        qualNameId.className.clId = clId;
        qualNameId.name = fieldName;
        return ShortForm.F.createShortForm(this, qualNameId);
    }

    protected String getThreadShortForm(String threadName) {
        return ShortForm.T.createShortForm(this, threadName);
    }

    protected String getMethodShortForm(String className, long clId, String fieldName) {
        QualName qualNameId = qualNameTL.get();
        qualNameId.className.name = className;
        qualNameId.className.clId = clId;
        qualNameId.name = fieldName;
        return ShortForm.M.createShortForm(this, qualNameId);
    }

    /**
     * Define a short form of {@code key}.
     *
     * @param type
     * @param key
     * @param shortForm
     * @param classShortForm only for fields and methods
     */
    public abstract void defineShortForm(ShortForm type, Object key, String shortForm, String classShortForm);

// START GENERATED CODE
// EDIT AND RUN CSFVMATextStoreGenerator.main() TO MODIFY

    @Override
    public void adviseAfterMultiNewArray(long arg1, String arg2, long arg3, String arg4, long arg5, int arg6) {
        ProgramError.unexpected("adviseAfterMultiNewArray");
    }

    @Override
    public void adviseBeforeGC(long arg1, String arg2) {
        del.adviseBeforeGC(arg1, getThreadShortForm(arg2));
    }

    @Override
    public void adviseAfterGC(long arg1, String arg2) {
        del.adviseAfterGC(arg1, getThreadShortForm(arg2));
    }

    @Override
    public void adviseBeforeThreadStarting(long arg1, String arg2) {
        del.adviseBeforeThreadStarting(arg1, getThreadShortForm(arg2));
    }

    @Override
    public void adviseBeforeThreadTerminating(long arg1, String arg2) {
        del.adviseBeforeThreadTerminating(arg1, getThreadShortForm(arg2));
    }

    @Override
    public void adviseBeforeReturnByThrow(long arg1, String arg2, long arg3, int arg4) {
        del.adviseBeforeReturnByThrow(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), arg4);
    }

    @Override
    public void adviseBeforeConstLoad(long arg1, String arg2, long arg3) {
        del.adviseBeforeConstLoad(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeConstLoad(long arg1, String arg2, float arg3) {
        del.adviseBeforeConstLoad(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeConstLoad(long arg1, String arg2, double arg3) {
        del.adviseBeforeConstLoad(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeConstLoadObject(long arg1, String arg2, long arg3) {
        del.adviseBeforeConstLoadObject(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeLoad(long arg1, String arg2, int arg3) {
        del.adviseBeforeLoad(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeArrayLoad(long arg1, String arg2, long arg3, int arg4) {
        del.adviseBeforeArrayLoad(arg1, getThreadShortForm(arg2),  checkRepeatId(arg3, arg2), arg4);
    }

    @Override
    public void adviseBeforeStore(long arg1, String arg2, int arg3, float arg4) {
        del.adviseBeforeStore(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeStore(long arg1, String arg2, int arg3, double arg4) {
        del.adviseBeforeStore(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeStore(long arg1, String arg2, int arg3, long arg4) {
        del.adviseBeforeStore(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeStoreObject(long arg1, String arg2, int arg3, long arg4) {
        del.adviseBeforeStoreObject(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeArrayStore(long arg1, String arg2, long arg3, int arg4, long arg5) {
        del.adviseBeforeArrayStore(arg1, getThreadShortForm(arg2),  checkRepeatId(arg3, arg2), arg4, arg5);
    }

    @Override
    public void adviseBeforeArrayStore(long arg1, String arg2, long arg3, int arg4, double arg5) {
        del.adviseBeforeArrayStore(arg1, getThreadShortForm(arg2),  checkRepeatId(arg3, arg2), arg4, arg5);
    }

    @Override
    public void adviseBeforeArrayStore(long arg1, String arg2, long arg3, int arg4, float arg5) {
        del.adviseBeforeArrayStore(arg1, getThreadShortForm(arg2),  checkRepeatId(arg3, arg2), arg4, arg5);
    }

    @Override
    public void adviseBeforeArrayStoreObject(long arg1, String arg2, long arg3, int arg4, long arg5) {
        del.adviseBeforeArrayStoreObject(arg1, getThreadShortForm(arg2),  checkRepeatId(arg3, arg2), arg4, arg5);
    }

    @Override
    public void adviseBeforeStackAdjust(long arg1, String arg2, int arg3) {
        del.adviseBeforeStackAdjust(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeOperation(long arg1, String arg2, int arg3, float arg4, float arg5) {
        del.adviseBeforeOperation(arg1, getThreadShortForm(arg2), arg3, arg4, arg5);
    }

    @Override
    public void adviseBeforeOperation(long arg1, String arg2, int arg3, long arg4, long arg5) {
        del.adviseBeforeOperation(arg1, getThreadShortForm(arg2), arg3, arg4, arg5);
    }

    @Override
    public void adviseBeforeOperation(long arg1, String arg2, int arg3, double arg4, double arg5) {
        del.adviseBeforeOperation(arg1, getThreadShortForm(arg2), arg3, arg4, arg5);
    }

    @Override
    public void adviseBeforeConversion(long arg1, String arg2, int arg3, float arg4) {
        del.adviseBeforeConversion(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeConversion(long arg1, String arg2, int arg3, double arg4) {
        del.adviseBeforeConversion(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeConversion(long arg1, String arg2, int arg3, long arg4) {
        del.adviseBeforeConversion(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeIf(long arg1, String arg2, int arg3, int arg4, int arg5) {
        del.adviseBeforeIf(arg1, getThreadShortForm(arg2), arg3, arg4, arg5);
    }

    @Override
    public void adviseBeforeIfObject(long arg1, String arg2, int arg3, long arg4, long arg5) {
        del.adviseBeforeIfObject(arg1, getThreadShortForm(arg2), arg3, arg4, arg5);
    }

    @Override
    public void adviseBeforeBytecode(long arg1, String arg2, int arg3) {
        del.adviseBeforeBytecode(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeReturn(long arg1, String arg2) {
        del.adviseBeforeReturn(arg1, getThreadShortForm(arg2));
    }

    @Override
    public void adviseBeforeReturn(long arg1, String arg2, float arg3) {
        del.adviseBeforeReturn(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeReturn(long arg1, String arg2, double arg3) {
        del.adviseBeforeReturn(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeReturn(long arg1, String arg2, long arg3) {
        del.adviseBeforeReturn(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeReturnObject(long arg1, String arg2, long arg3) {
        del.adviseBeforeReturnObject(arg1, getThreadShortForm(arg2), arg3);
    }

    @Override
    public void adviseBeforeGetStatic(long arg1, String arg2, String arg3, long arg4, String arg5) {
        del.adviseBeforeGetStatic(arg1, getThreadShortForm(arg2), getClassShortForm(arg3, arg4), arg4, getFieldShortForm(arg3, arg4, arg5));
    }

    @Override
    public void adviseBeforePutStaticObject(long arg1, String arg2, String arg3, long arg4, String arg5, long arg6) {
        del.adviseBeforePutStaticObject(arg1, getThreadShortForm(arg2), getClassShortForm(arg3, arg4), arg4, getFieldShortForm(arg3, arg4, arg5), arg6);
    }

    @Override
    public void adviseBeforePutStatic(long arg1, String arg2, String arg3, long arg4, String arg5, double arg6) {
        del.adviseBeforePutStatic(arg1, getThreadShortForm(arg2), getClassShortForm(arg3, arg4), arg4, getFieldShortForm(arg3, arg4, arg5), arg6);
    }

    @Override
    public void adviseBeforePutStatic(long arg1, String arg2, String arg3, long arg4, String arg5, long arg6) {
        del.adviseBeforePutStatic(arg1, getThreadShortForm(arg2), getClassShortForm(arg3, arg4), arg4, getFieldShortForm(arg3, arg4, arg5), arg6);
    }

    @Override
    public void adviseBeforePutStatic(long arg1, String arg2, String arg3, long arg4, String arg5, float arg6) {
        del.adviseBeforePutStatic(arg1, getThreadShortForm(arg2), getClassShortForm(arg3, arg4), arg4, getFieldShortForm(arg3, arg4, arg5), arg6);
    }

    @Override
    public void adviseBeforeGetField(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseBeforeGetField(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getFieldShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseBeforePutFieldObject(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6, long arg7) {
        del.adviseBeforePutFieldObject(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getFieldShortForm(arg4, arg5, arg6), arg7);
    }

    @Override
    public void adviseBeforePutField(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6, double arg7) {
        del.adviseBeforePutField(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getFieldShortForm(arg4, arg5, arg6), arg7);
    }

    @Override
    public void adviseBeforePutField(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6, long arg7) {
        del.adviseBeforePutField(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getFieldShortForm(arg4, arg5, arg6), arg7);
    }

    @Override
    public void adviseBeforePutField(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6, float arg7) {
        del.adviseBeforePutField(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getFieldShortForm(arg4, arg5, arg6), arg7);
    }

    @Override
    public void adviseBeforeInvokeVirtual(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseBeforeInvokeVirtual(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseBeforeInvokeSpecial(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseBeforeInvokeSpecial(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseBeforeInvokeStatic(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseBeforeInvokeStatic(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseBeforeInvokeInterface(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseBeforeInvokeInterface(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseBeforeArrayLength(long arg1, String arg2, long arg3, int arg4) {
        del.adviseBeforeArrayLength(arg1, getThreadShortForm(arg2), arg3, arg4);
    }

    @Override
    public void adviseBeforeThrow(long arg1, String arg2, long arg3) {
        del.adviseBeforeThrow(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2));
    }

    @Override
    public void adviseBeforeCheckCast(long arg1, String arg2, long arg3, String arg4, long arg5) {
        del.adviseBeforeCheckCast(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5);
    }

    @Override
    public void adviseBeforeInstanceOf(long arg1, String arg2, long arg3, String arg4, long arg5) {
        del.adviseBeforeInstanceOf(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5);
    }

    @Override
    public void adviseBeforeMonitorEnter(long arg1, String arg2, long arg3) {
        del.adviseBeforeMonitorEnter(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2));
    }

    @Override
    public void adviseBeforeMonitorExit(long arg1, String arg2, long arg3) {
        del.adviseBeforeMonitorExit(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2));
    }

    @Override
    public void adviseAfterInvokeVirtual(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseAfterInvokeVirtual(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseAfterInvokeSpecial(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseAfterInvokeSpecial(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseAfterInvokeStatic(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseAfterInvokeStatic(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseAfterInvokeInterface(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseAfterInvokeInterface(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

    @Override
    public void adviseAfterNew(long arg1, String arg2, long arg3, String arg4, long arg5) {
        del.adviseAfterNew(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5);
    }

    @Override
    public void adviseAfterNewArray(long arg1, String arg2, long arg3, String arg4, long arg5, int arg6) {
        del.adviseAfterNewArray(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, arg6);
    }

    @Override
    public void adviseAfterMethodEntry(long arg1, String arg2, long arg3, String arg4, long arg5, String arg6) {
        del.adviseAfterMethodEntry(arg1, getThreadShortForm(arg2), checkRepeatId(arg3, arg2), getClassShortForm(arg4, arg5), arg5, getMethodShortForm(arg4, arg5, arg6));
    }

// END GENERATED CODE

}
